<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
    <title>Document</title>
</head>
<body>
    <div id="widthMeasure"></div>
		<div id="chart"></div>

		<script language="javascript" type="text/javascript">

        var margin = {
                top: 20,
                right: 20,
                bottom: 20,
                left: 20
            };
        var width = document.getElementById('widthMeasure').offsetWidth - margin.left - margin.right - 10,
        height = 100;


        var svg = d3.select("#chart")
		.append("svg")
		.attr("width", width + margin.left + margin.right)
		.attr("height", height + margin.top + margin.bottom)
		.append("g")
		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        var defs = svg.append("defs");
        var linearGradient = defs.append("linearGradient")
		.attr("id","animate-gradient")
		.attr("x1","0%")
		.attr("x2","100%")
        .attr("y1","0%")
		.attr("y2","100%")
		.attr("spreadMethod", "reflect");

        var colours = ["#3F7D58", "#EFEFEF", "#EF9651", "#EC5228"];
        linearGradient.selectAll(".stop")
		.data(colours)
		.enter().append("stop")
		.attr("offset", function(d,i) { return i/(colours.length-1); })   
		.attr("stop-color", function(d) { return d; });

        linearGradient.append("animate")
		.attr("attributeName","x1")
		.attr("values","0%;100%")
		.attr("dur","7s")
		.attr("repeatCount","indefinite");


        linearGradient.append("animate")
		.attr("attributeName","x2")
		.attr("values","100%;150%")
		.attr("dur","7s")
		.attr("repeatCount","indefinite");

        svg.append("rect")
		.attr("x", 0)
		.attr("y", 0)
		.attr("width", width)
		.attr("height", height)
		.style("fill", "url(#animate-gradient)");




        </script>
    
</body>
</html>